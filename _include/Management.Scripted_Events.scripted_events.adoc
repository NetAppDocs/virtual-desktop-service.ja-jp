= 概要




== 概要

スクリプト化イベントは、高度な管理者がシステムメンテナンス、ユーザアラート、グループポリシー管理、またはその他のイベントを自動化するためのカスタムメカニズムを提供します。スクリプトは、引数を指定して実行可能プロセスとして実行するように指定することも、別の実行可能プログラムの引数として使用することもできます。この機能を使用すると、スクリプトを組み合わせてネストし、複雑なカスタマイズと統合のニーズをサポートできます。

アクション内のスクリプト化されたイベントの詳細な例については、を参照してください link:Management.Applications.application_entitlement_workflow.html["アプリケーションエンタイトルメントガイド"]。

さらに、スクリプトによる処理を必要としない自動化を作成することもできます。システムトリガーによって自動化フローが起動され、オプションの引数を指定して既存のプログラムまたはシステムユーティリティが実行されます。

スクリプトイベントには ' スクリプトの * リポジトリ * と * アクティビティ * の両方が含まれますスクリプトには、 * 何を実行するかという指示が含まれています。アクティビティは、スクリプトを適切なトリガーとターゲット（ * when と where * ）にリンクしています。



=== リポジトリ

[ リポジトリ ] タブには 'VDS アカウント内から配備できるすべてのスクリプトのリストが表示されますVDS インスタンスのすべての管理者が共有するカスタムリポジトリです。スクリプト化イベントへのアクセスは '_VDS> 管理者 > 権限ページ _ で管理できます

image::sub.Management.Scripted_Events.scripted_events-1ce76.png[sub.Management.Scripted Events.scripted イベント 1ce76]



==== 顧客フィルタ

各 VDS 管理者組織には、組織によって作成またはカスタマイズされたスクリプトのプライベートライブラリがあります。これらのスクリプトは、スクリプトタイプ " 顧客 " として定義されます。 お客様のスクリプト：すべての VDS 管理者が削除および編集し ' 適切な管理者権限を持つスクリプトをスクリプトイベントセクションに追加します



==== グローバルフィルタ

ネットアップは、すべての VDS 管理者組織で共通の「グローバル」スクリプトのライブラリも公開し、管理しています。これらのスクリプトは、スクリプトタイプ「グローバル」として定義されます。 VDS 管理者がグローバルスクリプトを編集または削除することはできません。代わりに、グローバルスクリプトを「クローニング」できます。このスクリプトは「顧客」スクリプトであり、編集して使用できます。



==== スクリプトをダウンロードします

スクリプト化されたイベントに関連付けられたスクリプトファイルをダウンロードする機能により 'VDS 管理者は配備前に基本となるスクリプトファイルを確認および編集できます完全には理解できないスクリプトを実行することは絶対にお勧めしません。

image::sub.Management.Scripted_Events.scripted_events-02a9b.png[sub.Management.Scripted イベント .scripted イベント 02a9b]



==== スクリプトを追加します

[__ スクリプトの追加 ] ボタンをクリックすると ' スクリプトを作成してリポジトリに保存するための新しいページが開きます

image::Management.Scripted_Events.scripted_events-a53fa.png[management.Scripted Events.scripted イベント a53fa]

新しいスクリプトを作成するには、次のフィールドを入力する必要があります。

* * 名前 *
* * スクリプトファイルを含める *
+
** Yes - スクリプトファイル（ .ps1 ファイルなど）をアップロードして、「 Execute with 」実行可能ファイルで実行することを許可します。
** いいえ - 下の「スクリプトファイル」フィールドを削除し、単に「引数を指定して実行」コマンドを実行します


* * スクリプトファイル *
+
** _Include スクリプトファイル =YES_ このフィールドは表示され、スクリプトファイルのアップロードが可能です。


* * * と一緒に実行します
+
** スクリプトファイルまたは実行するコマンドの実行に使用する実行可能ファイルのパスを定義します。
** たとえば、 PowerShell でを実行する場合、「 Execute with 」の値は _C ： \WINDOWS\system32\WindowsPowerShell\v1.0\PowerShell.exe_ になります


* * 引数 *
+
** 「 Executes with 」コマンドに対して実行される追加の引数を定義します。
** VDS では、次のようなコンテキスト認識変数を使用できます。
+
*** %companycode% - 実行時の会社コード
*** %servername% - 実行時の VM 名
*** %samaccountname% - <username><companycode>
*** %applicationname% - 実行時にアプリケーション名を要求しました
*** %scriptname% - 実行時のスクリプト名
*** %username% - 実行時の username@loginidentifier




* * ドキュメント URL *
+
** このフィールドを使用すると、 VDS 管理者の組織が使用するナレッジベースシステムなど、 VDS 外で見つかったドキュメントにスクリプトのライターをリンクできます。






==== スクリプトを編集します

リポジトリ内のスクリプトの名前をクリックすると ' スクリプトの詳細が表示された新しいページが開き '*edit* を実行するためのアクション・ボタンが表示されます

スクリプトを編集する場合、同じフィールドは、上で説明したように編集できます link:#add-script["スクリプトを追加します"] セクション。

このスクリプトの詳細ページでは、 * delete * スクリプトおよび * download * アップロードされたスクリプトファイルを削除することもできます。

image::Management.Scripted_Events.scripted_events-3e756.png[management.Scripted Events.scripted イベント 3e756]



=== アクティビティ：

アクティビティは、リポジトリから導入、 VM のサブセット、トリガーイベントにスクリプトをリンクします。

image::Management.Scripted_Events.scripted_events-f971c.png[management.Scripted Events.scripted イベント f971c]



==== アクティビティを追加します

[+] アクティビティを追加ボタンをクリックすると ' アクティビティを作成するための新しいページが開きます

image::Management.Scripted_Events.scripted_events-02ef8.png[management.Scripted Events.scripted イベント 02ef8]

新しいアクティビティを作成するには、次のフィールドに入力する必要があります。

* * 名前 *
* * 概要 * （オプション）
* * 導入 *
* * スクリプト *
* * 引数 *
* * 有効 * チェックボックス
* * イベント設定 *




==== アクティビティトリガ

image::sub.Management.Scripted_Events.scripted_events-cdfcd.png[sub.Management.Scripted Events.scripted イベント cdfcd]

* * アプリケーションのインストール *
+
** これは、 VDS 管理者が _Workspace > Applications_page から「 + 追加 ... 」をクリックしたときにトリガされます。
** このオプションを選択すると、アプリケーションライブラリからアプリケーションを選択し、アプリケーションのショートカットを事前定義できます。
** このトリガーの詳細な手順については、を参照してください link:scriptlibrary.AdobeReader.html#install-script["Adobe Reader DC_script ドキュメントをインストールします"]。


* * アプリケーションのアンインストール *
+
** これは 'VDS 管理者が _Workspace> Applications_page から [ アクション > アンインストール ] をクリックしたときにトリガされます
** このオプションを選択すると、アプリケーションライブラリからアプリケーションを選択し、アプリケーションのショートカットを事前定義できます。
** このトリガーの詳細な手順については、を参照してください link:scriptlibrary.AdobeReader.html##uninstall-script["Adobe Reader DC_script ドキュメントをアンインストールします"]。


* * クローンサーバ *
+
** これは、既存の VM に対してクローン機能が実行されたときにトリガーされます


* * キャッシュの作成 *
+
** これは、プロビジョニングコレクションキャッシュ用の VDS で新しい VM が構築されるたびにトリガーされます


* * クライアントを作成 *
+
** VDS に新しいクライアント組織を追加すると、このイベントがトリガーされます


* * サーバの作成 *
+
** VDS によって新しい VM が構築されると、このイベントがトリガーされます


* * ユーザーの作成 *
+
** VDS を使用して新しいユーザを追加すると、このイベントがトリガーされます


* * ユーザーの削除 *
+
** VDS を使用して新しいユーザを削除すると、このイベントがトリガーされます


* * 手動 *
+
** これは 'Scripted Events > Activity ページから VDS 管理者が手動でトリガされます


* * アプリケーションの手動更新 *
* * スケジュール済み *
+
** これは、定義された日時に達したときにトリガーされます


* * サーバーを起動 *
+
** この処理は、 VM をブートするたびに、 VM に対して実行されます




_Name_( 名前 ) をクリックすると ' アクティビティを編集できるダイアログボックスが開きます
