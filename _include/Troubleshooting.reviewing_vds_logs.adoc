= 概要
:allow-uri-read: 




== 概要

VDS で発生するログの大部分は、その量が多いため Web UI では公開されません。さらに詳細なログがエンドポイントにあります。これらのログについて以下で説明します。

VDS v5.4 以降では、ログは次のフォルダパスにあります。

 C:\programdata\cloudworkspace
VDS の以前のバージョンでは、次のパスに配置できます。

....
C:\Program Files\CloudWorkspace\
C:\Program Files\CloudJumper\
C:\Program Files\IndependenceIT\
....

NOTE: ファイルタイプは VDS のバージョンによっても異なります。ログファイルは、前述のパスのサブフォルダにある .txt ファイルまたは .log ファイルです。



== 自動ログ



=== CW VM Automation Service ログ

 CwVmAutomationService.log
CW VM Automation サービスは、展開内のすべての仮想マシンの管理を担当する Windows サービスです。Windows サービスでは常に導入環境で実行されますが、運用モードにはスケジュールタスクモードとイベントモードの 2 つがあります。

スケジュールされたタスクモードは、スケジュールの一部として VM に対して実行されるアクティビティで構成されます。これには、収集サイジングおよびパフォーマンスデータ、 VM のリブート、ワークロードスケジュールおよびライブスケーリング機能によって生成されるルールセットに対するオン状態（オンまたはオフ）の確認が含まれます。ログでは、これらのアクションタイプが、「 Daily Actions 」、「 Weekly Actions 」、「 Daily Maintenance 」などの名前で 5 列目に示されます。「なぜサーバー X が夜 2 時に再起動したのか」や「このサーバーがオフになっていると思うときにオンになる理由」などのトラブルシューティングを行う場合は、通常、これらの特定の VM のスケジュールされたタスクを確認するのが最良の場所です。

イベントモードは、 CW オートメーションサービスなどのユーザーまたはその他の VDS サービスがタスクの完了を要求するとアクティブになります。このタイプのアクティビティの例としては、ワークスペースにユーザーが追加されたために、サーバーのサイズと状態を確認するように要求する、新しいサーバーまたは CW 自動化の作成を要求するユーザーリクエストがあります。通常、これらのイベントには、イベント名「 Create Server 」と VM の実際の名前の両方が付いたログエントリがあります（例： Create Server NNXTS2 ）。これらのタイプのイベントをトラブルシューティングする場合、通常はログの一番下までスクロールしてから、 VM 名を上位検索で検索することを推奨します。その後、さらに上にスクロールして、プロセスが開始された場所を確認できます。



=== CW オートメーションサービスログ

 CWAutomationService.log
CW オートメーションサービスログは、 Workspace 展開のコンポーネントを管理するための主要な Windows サービスです。ユーザ、アプリケーション、データデバイス、ポリシーの管理に必要なタスクを実行します。また、導入環境内の VM のサイズ、数、または状態を変更する必要がある場合に、 CW VM Automation サービスのタスクを作成できます。

CW VM オートメーションサービスと同様に、 CW オートメーションサービスは、スケジュールされたタスクとイベント駆動型のタスクの両方を実行します。後者は、より頻繁に実行されます。CW オートメーションサービスのログでは、作業対象のエンティティとアクション（例： Start Server NNXTS1 ）との各行が作成されるため、ファイルの下部からエンティティ名を検索すると、タスクに適用される特定のログ行を簡単に見つけることができます。



=== CW エージェントサービスログ

 CwAgent.log
CW エージェントサービスは、 VM のリソースレベルと使用率の確認、 VM に TLS トラフィック用の有効な証明書があるかどうかの確認、および強制再起動期間に達したかどうかの確認など、特定の VM に対してローカルなすべてのタスクを実行します。このログを使用して、タスクの詳細情報を確認することに加えて、予期しない VM の再起動や予期しないネットワークまたはリソースアクティビティの有無を確認することもできます。



=== CWManagerX ログ

 CWManagerX.log
CWManagerX は、ローカル展開と VDS グローバルコントロールプレーン間の通信リンクを提供する Web サービスです。VDS Web アプリケーションまたは VDS API で開始されたタスクおよびデータ要求は、この Web サービスを介してローカル展開に通知されます。そこから、タスクと要求は適切な Web サービス（上記を参照）に送られるか、まれに Active Directory に直接送信されます。これは通信リンクであるため、通常の通信中に発生するログはあまりありませんが、このログには通信リンクが切断された場合や正常に動作していない場合にエラーが記録されます。



=== DC 構成ログ

 DCConfig.log
DC Config は、 VDS Web アプリケーションインタフェースで公開されない展開固有の構成パラメータを提供する Windows アプリケーションです。DC Config ログには、 DC Config で設定を変更したときに実行されるアクティビティの詳細が記録されます。



=== CAVDCDeployment ログ

 CAVDCDeployment.log
CW VDC の導入は、 Azure での導入の作成に必要なタスクを実行する Windows アプリケーションです。ログは、 Cloud Workspace Windows サービスの構成、デフォルトの GPO 、およびルーティングとリソースルールを追跡します。



=== その他のログ

....
CwVmAutomationService-Installing.log
CwAgent-Installing.log
....
残りのログは、前述した Windows サービスとアプリケーションのインストールを追跡します。VDS サービスは、その特定の展開で新しいバージョンをターゲットにしたときに自動更新されるため、これらのログは、通常、サービスまたはアプリケーションをアップグレード中にオフにする必要があるため、アップグレードプロセスを追跡します。サービスが一貫して停止している場合、これらのログは、特定のサービスへのアップグレードに失敗した場合に原因を特定するのに役立ちます。このような場合は、アップグレードが失敗した理由を記載したエラーがログに記録されます。



=== ログへのアクセスと情報の確認

[+]image:troubleshooting1.png[""]

. VDS では、詳細なログが保持され、 VDS の導入ページのタスク履歴セクションにいくつかのログが表示されます。[ 表示 ] をクリックすると、リストされているタスクの詳細が表示されます。
+
image:troubleshooting2.png[""]

. タスク履歴には、実際のルート原因を識別するのに十分な詳細が含まれていない場合があります。[ タスク履歴 ] セクションを使用可能にし、ログに記録されたすべてのイベントに圧倒されないようにするため、ここにはタスク情報のサブセットだけが表示されます。テキストログファイルをさらに詳しく見るために、前述の説明を参考にしてください。
+
.. このログにアクセスするには、 Deployments セクションに移動し、 CWMGR1 VM の横にある Gear アイコンをクリックしてから、 Connect をクリックします（または CwAgent ログの場合は、該当する VM に接続します）。


+
image:troubleshooting3.png[""]

. プラットフォームサーバー（ CWMGR1 など）に接続すると、サーバーに自動的にログインされません（テナント内のサーバーに接続する場合とは異なります）。Level3.tech アカウントでログインする必要があります。
+
image:troubleshooting4.png[""]

. 次に、上に示すパスに移動し、ログファイルを開きます。
+
image:troubleshooting5.png[""]

. このテキストファイルには、すべてのイベントのログが含まれています。フォームは新しいものから順に表示されます。
+
image:troubleshooting6.png[""]

. ネットアップ VDS でサポートケースを開くときに、ここで見つかったエラーを提供できると、解決までの時間が大幅に短縮されます。

